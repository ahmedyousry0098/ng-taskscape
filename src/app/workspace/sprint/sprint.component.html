<div class="container items-center w-screen justify-center flex flex-col py-5">
  <button
    class="relative inline-flex items-center justify-center p-0.5 mb-2 mr-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-purple-600 to-blue-500 group-hover:from-purple-600 group-hover:to-blue-500 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800"
    (click)="toggleModal()"
    *ngIf="IRole === 'scrumMaster'"
  >
    <span
      class="relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0"
    >
      <i class="fa-solid fa-plus p-1"></i>Add Sprint
    </span>
  </button>

  <app-addsprint
    [showModal]="showModal"
    [projects]="projects"
    (toggleModal)="onToggleModal($event)"
  ></app-addsprint>

  <div class="flex flex-col">
    <div
      class="my-2 p-1 outline-double outline-teal-600"
      *ngFor="let project of projects"
    >
      <div
        class="border border-blue-400 border-spacing-3 rounded-lg bg-zinc-300"
      >
        <h3 class="ps-3 h-4 text-center">{{ project.projectName }}</h3>
      </div>
      <ng-container
        *ngIf="project.sprints && project.sprints.length > 0; else noSprints"
      >
        <table
          class="max-w-4xl w-screen my-3 bg-blue-200 border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700"
        >
          <thead>
            <tr>
              <th>Sprint Name</th>
              <th>Start Date</th>
              <th>End Date</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let sprint of project.sprints">
              <td class="text-center">{{ sprint.sprint_name }}</td>
              <td class="text-center py-2">
                {{ sprint.start_date | dateFormat : "dd-MM-yyyy" }}
              </td>
              <td class="text-center">
                {{ sprint.deadline | dateFormat : "dd-MM-yyyy" }}
              </td>
              <td class="text-center">
                <button
                  class="relative inline-flex items-center justify-center mb-1 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-cyan-500 to-blue-500 group-hover:from-cyan-500 group-hover:to-blue-500 hover:text-white focus:ring-4 focus:outline-none focus:ring-cyan-200 dark:focus:ring-cyan-800"
                  routerLink="details/{{ sprint._id }}"
                >
                  <span
                    class="relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0"
                  >
                    More
                  </span>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </ng-container>
      <ng-template #noSprints>
        <h3 class="ps-3 pt-5 text-red-800">
          There are no sprints for this project yet.
        </h3>
      </ng-template>
    </div>
  </div>
</div>
